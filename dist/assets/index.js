import{r as a,j as s,c as E,a as x,B as d,S as C,C as I,b as P,d as z,R as M}from"./index2.js";const b=a.forwardRef(({className:o,type:l,...c},r)=>s.jsx("input",{type:l,className:E("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",o),ref:r,...c}));b.displayName="Input";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=x("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=x("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=x("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=x("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),h="http://localhost:5001";function _(){const[o,l]=a.useState([]),[c,r]=a.useState(null),[n,p]=a.useState("Untitled Session"),[w,f]=a.useState(!1),[g,y]=a.useState(!1),[v,u]=a.useState("Untitled Session"),m=a.useCallback(async()=>{try{const e=await fetch(`${h}/api/clipboard`);if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const t=await e.json();if(l(t),t.length>0&&t[0].session_title){const i=t[0].session_title;n===v&&(p(i),u(i))}r(null)}catch(e){console.error("Error fetching items:",e),r("Failed to fetch items")}},[n,v]);a.useEffect(()=>{m();const e=setInterval(m,2e3);return()=>clearInterval(e)},[m]);const S=async e=>{try{const t=await fetch(`${h}/api/clipboard/${e}`,{method:"DELETE"});if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);l(i=>i.filter(T=>T.id!==e)),r(null)}catch(t){console.error("Error deleting item:",t),r("Failed to delete item")}},k=e=>{p(e.target.value)},j=async()=>{try{const e=await fetch(`${h}/api/session/title`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:n})});if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);f(!1),u(n),r(null)}catch(e){console.error("Error updating session title:",e),r("Failed to update session title")}},N=async()=>{try{y(!0);const e=await fetch(`${h}/api/session/end`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:n})});if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const t=await e.json();console.log("Session saved:",t.filepath);const i="Untitled Session";p(i),u(i),l([]),r(null)}catch(e){console.error("Error ending session:",e),r("Failed to end session")}finally{y(!1)}};return s.jsx("div",{className:"h-screen bg-white",children:s.jsxs("div",{className:"p-4",children:[s.jsx("div",{className:"flex items-center justify-between mb-4",children:w?s.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[s.jsx(b,{value:n,onChange:k,className:"text-lg font-bold",autoFocus:!0,onKeyPress:e=>{e.key==="Enter"&&j()}}),s.jsx(d,{variant:"ghost",size:"icon",onClick:j,className:"h-8 w-8",children:s.jsx(H,{size:16})})]}):s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("h1",{className:"text-lg font-bold",children:n}),s.jsx(d,{variant:"ghost",size:"icon",onClick:()=>f(!0),className:"h-6 w-6",children:s.jsx(L,{size:14})})]})}),c&&s.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4 text-sm",children:c}),s.jsx(C,{className:"h-[calc(100vh-180px)]",children:o.length===0?s.jsx("p",{className:"text-gray-500 text-center text-sm",children:"No copied items yet"}):s.jsx("div",{className:"space-y-2",children:o.map(e=>s.jsx(I,{className:"shadow-sm",children:s.jsx(P,{className:"p-3",children:s.jsxs("div",{className:"flex justify-between items-start gap-2",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm whitespace-pre-wrap break-words",children:e.content}),e.source_url&&s.jsxs("a",{href:e.source_url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:text-blue-700 flex items-center gap-1 mt-1 text-xs",children:[s.jsx($,{size:12}),"Source"]}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:new Date(e.timestamp).toLocaleString()})]}),s.jsx(d,{variant:"ghost",size:"icon",onClick:()=>S(e.id),className:"text-red-500 hover:text-red-700 h-6 w-6",children:s.jsx(R,{size:14})})]})})},e.id))})}),s.jsx("div",{className:"mt-4",children:s.jsx(d,{onClick:N,disabled:o.length===0||g,className:"w-full bg-blue-500 hover:bg-blue-600 text-white",children:g?"Saving...":"End Session & Save"})})]})})}z.createRoot(document.getElementById("root")).render(s.jsx(M.StrictMode,{children:s.jsx(_,{})}));
